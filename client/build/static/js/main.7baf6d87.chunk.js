(this.webpackJsonpnewclient=this.webpackJsonpnewclient||[]).push([[0],{55:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(22),r=n.n(i),o=(n(55),n(49)),s=n(50),l=n(3),u=n(4),d=n(24),j=Object(d.b)({name:"todolist",initialState:{list:[],error:null},reducers:{setList:function(e,t){e.list=t.payload.list||e.list,e.unSaved=t.payload.unSaved},changeItemState:function(e,t){e.list[t.payload].isDone=!e.list[t.payload].isDone},deleteItem:function(e,t){e.list.splice(t.payload,1)},clearCompleted:function(e){e.list=e.list.filter((function(e){return!e.isDone})),e.list.forEach((function(e,t){return e.index=t}))},editItem:function(e,t){e.list[t.payload.index].text=t.payload.text},setError:function(e,t){e.error=t.payload},addTodo:function(e,t){e.unSaved=void 0,e.list.unshift({text:t.payload,index:0,isDone:!1}),e.list.forEach((function(e,t){return e.index=t}))},setUnsavedTodo:function(e,t){t.payload?e.unSaved?e.unSaved.text=t.payload:e.unSaved={text:t.payload,unSaved:!0,isDone:!1}:e.unSaved=void 0},changeAllStates:function(e,t){e.list.forEach((function(e){return e.isDone=t.payload}))}}}),b=function(e){return function(t){C("http://127.0.0.1:8000/api/deleteItem","POST",{index:e}).then((function(e){e.ok||t(O("Server error"))})).catch((function(e){return t(O(e.message))}))}},h=j.reducer,f=j.actions,x=f.setList,O=f.setError,p=f.addTodo,m=f.setUnsavedTodo,v=f.changeItemState,g=f.changeAllStates,S=f.deleteItem,y=f.clearCompleted,k=f.editItem;function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return fetch(e,{method:t,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},body:JSON.stringify(n)})}var N=n(1);function T(e){var t=e.item,n=e.index,a=e.isEditing,i=Object(u.b)(),r=Object(l.f)(),o=Object(c.useCallback)((function(){i(function(e){return function(t){C("http://127.0.0.1:8000/api/changeItemState","PUT",{index:e}).then((function(e){e.ok||t(O("Server error"))})).catch((function(e){return t(O(e.message))}))}}(n))}),[n,i]),s=Object(c.useCallback)((function(){i(b(n))}),[n,i]),d=Object(c.useCallback)((function(e){var t=e.target.value;i(function(e){var t=e.index,n=e.text;return function(e){C("http://127.0.0.1:8000/api/editItem","PUT",{index:t,text:n}).then((function(t){t.ok||e(O("Server error"))})).catch((function(t){return e(O(t.message))}))}}({index:n,text:t}))}),[n,i]),j=Object(c.useCallback)((function(){r.push("/:".concat(n))}),[r,n]),h=Object(c.useCallback)((function(e){"Enter"===e.key&&(j(),e.target.value||i(b(n)))}),[j,i,n]);return Object(N.jsxs)("li",{className:(t.isDone?"completed ":"")+(a?"editing ":""),children:[Object(N.jsxs)("div",{className:"view",children:[t.hasOwnProperty("unSaved")?Object(N.jsx)("input",{className:"toggle",type:"checkbox",checked:t.isDone,readOnly:!0}):Object(N.jsx)("input",{className:"toggle",type:"checkbox",checked:t.isDone,onChange:o}),Object(N.jsx)("label",{children:t.text}),t.hasOwnProperty("unSaved")?Object(N.jsx)("button",{className:"destroy"}):Object(N.jsx)("button",{className:"destroy",onClick:s})]}),t.hasOwnProperty("unSaved")?Object(N.jsx)(N.Fragment,{}):Object(N.jsx)("input",{type:"text",className:"edit",autoFocus:a,value:t.text,onChange:d,onBlur:j,onKeyPress:h})]})}function D(){var e=Object(u.c)((function(e){return e})),t=e.list,n=e.unSaved,c=Object(s.a)({},Object(l.g)());return console.log(Object(l.g)()),Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("ul",{className:"todo-list",children:[n&&!c.filter&&Object(N.jsx)(T,{item:n,index:-1}),t.map((function(e,t){if(void 0===c.filter||"active"===c.filter&&!e.isDone||"completed"===c.filter&&e.isDone)return Object(N.jsx)(T,{item:e,index:t},t)}))]})})}var P=n(14);function E(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.list.length})),n=Object(u.c)((function(e){return e.list.filter((function(e){return e.isDone})).length})),a=Object(c.useCallback)((function(){e((function(e){C("http://127.0.0.1:8000/api/clearCompleted","POST").then((function(t){t.ok||e(O("Server error"))})).catch((function(t){return e(O(t.message))}))}))}),[e]);return Object(N.jsxs)("footer",{className:"footer",children:[Object(N.jsxs)("span",{className:"todo-count",children:[Object(N.jsx)("strong",{children:t-n})," item left"]}),Object(N.jsxs)("ul",{className:"filters",children:[Object(N.jsx)("li",{children:Object(N.jsx)(P.b,{exact:!0,to:"/",activeClassName:"selected",children:"All"})}),Object(N.jsx)("li",{children:Object(N.jsx)(P.b,{to:"/active",activeClassName:"selected",children:"Active"})}),Object(N.jsx)("li",{children:Object(N.jsx)(P.b,{to:"/completed",activeClassName:"selected",children:"Completed"})})]}),n?Object(N.jsx)("button",{className:"clear-completed",onClick:a,children:"Clear completed"}):Object(N.jsx)(N.Fragment,{})]})}var F=n(48),I=Object(F.io)("http://127.0.0.1:8000");function w(e){var t=e.parentState,n=Object(u.c)((function(e){return e.error})),a=Object(u.b)(),i=Object(c.useCallback)((function(e){var n;"Enter"===e.key&&e.target.value&&(t.isTyping=!1,a((n=e.target.value,function(e){C("http://127.0.0.1:8000/api/addTodo","POST",{text:n}).then((function(t){t.ok||e(O("Server error"))})).catch((function(t){return e(O(t.message))}))})),e.target.value="")}),[a,t]),r=Object(c.useCallback)((function(e){var n;t.isTyping=!0,a((n=e.target.value,function(e){C("http://127.0.0.1:8000/api/unSavedText","POST",{text:n}).then((function(t){t.ok||e(O("Server error"))})).catch((function(t){return e(O(t.message))}))}))}),[a,t]);return Object(N.jsxs)("header",{className:"header",children:[Object(N.jsx)("h1",{children:"todos"}),!!n&&Object(N.jsx)("p",{className:"error-text",children:n}),Object(N.jsx)("input",{className:"new-todo",type:"text",placeholder:"What needs to be done?",autoFocus:!t.isEditing,onChange:r,onKeyPress:i})]})}function M(e){var t=e.parentState,n=Object(u.b)(),a=Object(c.useCallback)((function(){var e;t.isMarked=!t.isMarked,n((e=t.isMarked,function(t){C("http://127.0.0.1:8000/api/changeAllStates","POST",{state:e}).then((function(e){e.ok||t(O("Server error"))})).catch((function(e){return t(O(e.message))}))}))}),[t,n]);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",checked:t.isMarked,readOnly:!0}),Object(N.jsx)("label",{htmlFor:"toggle-all",onClick:a,children:"Mark all as complete"})]})}var A=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})).list,n=Object(c.useState)({isMarked:t.filter((function(e){return e.isDone})).length===t.length||0===t.filter((function(e){return e.isDone})).length,isEditing:!1,isTyping:!1}),a=Object(o.a)(n,1)[0];return Object(c.useEffect)((function(){console.log("reloaded"),I.on("item:added",(function(t){var n=t.text;e(p(n))})),I.on("item:unSaved",(function(t){var n=t.text;e(m(n))})),I.on("item:changedState",(function(t){var n=t.index;e(v(n))})),I.on("item:deleted",(function(t){var n=t.index;e(S(n))})),I.on("list:changedAllStates",(function(t){var n=t.state;e(g(n))})),I.on("list:cleared",(function(){e(y())})),I.on("item:edited",(function(t){var n=t.index,c=t.text;e(k({index:n,text:c}))})),e((function(e){C("http://127.0.0.1:8000/api/getList","GET").then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("error")?e(O(t.error)):e(x({list:t.list,unSaved:t.unSaved}))})).catch((function(t){return e(O(t.message))}))}))})),Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("section",{className:"todoapp",children:[Object(N.jsx)(w,{parentState:a}),Object(N.jsxs)("section",{className:"main",children:[Object(N.jsx)(M,{parentState:a}),Object(N.jsxs)(P.a,{children:[Object(N.jsx)(l.c,{children:Object(N.jsx)(l.a,{exact:!0,path:"/:filter([a-zA-z]+)?",children:Object(N.jsx)(D,{})})}),Object(N.jsx)(E,{})]})]})]})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,92)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))},U=Object(d.a)({reducer:h});r.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(u.a,{store:U,children:Object(N.jsx)(A,{})})}),document.getElementById("root")),L()}},[[91,1,2]]]);
//# sourceMappingURL=main.7baf6d87.chunk.js.map